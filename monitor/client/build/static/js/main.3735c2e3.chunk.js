(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n(71)},40:function(e,t,n){},68:function(e,t){},71:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),s=n(32),i=n.n(s),c=(n(40),n(2)),r=n(3),l=n(5),h=n(4),u=n(6),d=n(7),p=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return a.a.createElement("header",{className:"main-header"},a.a.createElement("a",{href:"",className:"logo"},a.a.createElement("span",{className:"logo-mini"},a.a.createElement("b",null,"SX"),"M"),a.a.createElement("span",{className:"logo-lg"},a.a.createElement("b",null,"Synerex"),"Monitor")),a.a.createElement("nav",{className:"navbar navbar-static-top"},a.a.createElement("a",{href:"",className:"sidebar-toggle","data-toggle":"push-menu",role:"button"},a.a.createElement("span",{className:"sr-only"},"Toggle navigation"))))}}]),t}(o.Component),m=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("aside",{className:"main-sidebar"},a.a.createElement("section",{className:"sidebar"},a.a.createElement("form",{action:"#",method:"get",className:"sidebar-form"},a.a.createElement("div",{className:"input-group"},a.a.createElement("input",{type:"text",name:"q",className:"form-control",placeholder:"Filter..."}),a.a.createElement("span",{className:"input-group-btn"},a.a.createElement("button",{type:"submit",name:"search",id:"search-btn",className:"btn btn-flat"},a.a.createElement("i",{className:"fa fa-search"}))))),a.a.createElement("ul",{className:"sidebar-menu","data-widget":"tree"},a.a.createElement("li",{className:"header"},"Controls"),a.a.createElement("li",null,a.a.createElement("a",{href:"#",onClick:function(){e.props.viewChange()}},a.a.createElement("i",{className:"fa fa-th"})," ",a.a.createElement("span",null,"3D View"),a.a.createElement("span",{className:"pull-right-container"}))),a.a.createElement("li",null,a.a.createElement("a",{href:"#",onClick:function(){e.props.toggleTurn()}},a.a.createElement("i",{className:"fa fa-th"})," ",a.a.createElement("span",null,"ToggleTurn"),a.a.createElement("span",{className:"pull-right-container"}))),a.a.createElement("li",null,a.a.createElement("a",{href:"#",onClick:function(){e.props.clearLogs()}},a.a.createElement("i",{className:"fa fa-th"})," ",a.a.createElement("span",null,"Clear"),a.a.createElement("span",{className:"pull-right-container"}))),a.a.createElement("li",null,a.a.createElement("a",{href:"#",onClick:function(){e.props.addLog()}},a.a.createElement("i",{className:"fa fa-th"})," ",a.a.createElement("span",null,"Add Node"),a.a.createElement("span",{className:"pull-right-container"}))))))}}]),t}(o.Component),g=function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.log;return a.a.createElement("li",null,a.a.createElement("div",{className:"timeline-item"},a.a.createElement("div",{className:"timeline-body"},e.msgType,": ",e.chType,", id:",e.id,", dst:",e.dst,", target:",e.tgt,", ",e.arg)))}}]),t}(o.Component),v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"filterVal",value:function(){var e=this.refs.myInput.value;this.props.onFilterVal(e)}},{key:"render",value:function(){return a.a.createElement("div",{className:"box-tools"},a.a.createElement("div",{className:"input-group input-group-sm",style:{width:"200px"}},a.a.createElement("input",{type:"text",ref:"myInput",defaultValue:"",onKeyUp:this.filterVal.bind(this),name:"table_search",className:"form-control pull-right",placeholder:"\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u7d5e\u308a\u8fbc\u3080"}),a.a.createElement("div",{class:"input-group-btn"},a.a.createElement("button",{className:"btn btn-default"},a.a.createElement("i",{class:"fa fa-search"})))))}}]),t}(o.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"sortByAsc",value:function(e){e.preventDefault(),this.props.onSortByAsc(e.target.value)}},{key:"sortByDesc",value:function(e){e.preventDefault(),this.props.onSortByDesc(e.target.value)}},{key:"render",value:function(){return a.a.createElement("div",{class:"info-box"},a.a.createElement("span",{class:"info-box-icon bg-yellow"},a.a.createElement("i",{class:"fa fa-sort-amount-desc"})),a.a.createElement("div",{class:"info-box-content"},a.a.createElement("span",{class:"info-box-text"},"\u65e5\u4ed8\u3067\u30bd\u30fc\u30c8\u3059\u308b"),a.a.createElement("div",{class:"btn-group"},a.a.createElement("button",{className:"btn btn-default",onClick:this.sortByAsc.bind(this),value:"time"},"\u6607\u9806"),a.a.createElement("button",{className:"btn btn-default",onClick:this.sortByDesc.bind(this),value:"time"},"\u964d\u9806"))))}}]),t}(o.Component),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={logs:n.props.logs},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"handleFilter",value:function(e){var t=this.props.logs.filter(function(t){return t.msgType.indexOf(e)>=0||t.msgType.toLowerCase().indexOf(e)>=0||t.src.toString().indexOf(e)>=0||t.arg.indexOf(e)>=0||t.arg.toLowerCase().indexOf(e)>=0});this.setState({logs:t})}},{key:"handleSortByAsc",value:function(e){var t=this.state.logs.sort(function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0});this.setState({logs:t})}},{key:"handleSortByDesc",value:function(e){var t=this.state.logs.sort(function(t,n){return t[e]<n[e]?1:t[e]>n[e]?-1:0});this.setState({logs:t})}},{key:"render",value:function(){var e=this.state.logs.map(function(e,t){return a.a.createElement(g,{log:e,key:t})});return a.a.createElement("section",{className:"content"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-6 col-sm-6 col-xs-12"},a.a.createElement(f,{onSortByAsc:this.handleSortByAsc.bind(this),onSortByDesc:this.handleSortByDesc.bind(this)}))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-12"},a.a.createElement("div",{className:"box"},a.a.createElement("div",{className:"box-header"},a.a.createElement("h3",{className:"box-title"},"SM Market Logs"),a.a.createElement(v,{onFilterVal:this.handleFilter.bind(this)}))),a.a.createElement("ul",{className:"timeline"},e))))}}]),t}(o.Component),b=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={component:n.props.component,args:n.props.args},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"render",value:function(){return a.a.createElement("div",{className:"content-wrapper"},a.a.createElement(this.state.component,this.state.args,""))}}]),t}(o.Component),w=n(1),E=function(e){function t(e,n){var o;Object(c.a)(this,t),o=Object(l.a)(this,Object(h.a)(t).call(this));var a=Object(d.a)(Object(d.a)(o)),s={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};o.object=e,o.domElement=void 0!==n?n:document,o.enabled=!0,o.screen={left:0,top:0,width:0,height:0},o.rotateSpeed=1,o.zoomSpeed=1.2,o.panSpeed=.3,o.noRotate=!1,o.noZoom=!1,o.noPan=!1,o.staticMoving=!1,o.dynamicDampingFactor=.2,o.minDistance=0,o.maxDistance=1/0,o.keys=[65,83,68],o.target=new w.t;var i=new w.t,r=s.NONE,u=s.NONE,p=new w.t,m=new w.s,g=new w.s,v=new w.t,f=0,y=new w.s,b=new w.s,E=0,N=0,O=new w.s,k=new w.s;o.target0=o.target.clone(),o.position0=o.object.position.clone(),o.up0=o.object.up.clone();var j={type:"change"},x={type:"start"},M={type:"end"};o.handleResize=function(){if(o.domElement===document)o.screen.left=0,o.screen.top=0,o.screen.width=window.innerWidth,o.screen.height=window.innerHeight;else{var e=o.domElement.getBoundingClientRect(),t=o.domElement.ownerDocument.documentElement;o.screen.left=e.left+window.pageXOffset-t.clientLeft,o.screen.top=e.top+window.pageYOffset-t.clientTop,o.screen.width=e.width,o.screen.height=e.height}},o.handleEvent=function(e){console.log("Event"+e),"function"===typeof o[e.type]&&o[e.type](e)};var C=function(){var e=new w.s;return function(t,n){return e.set((t-a.screen.left)/a.screen.width,(n-a.screen.top)/a.screen.height),e}}(),S=function(){var e=new w.s;return function(t,n){return e.set((t-.5*a.screen.width-a.screen.left)/(.5*a.screen.width),(a.screen.height+2*(a.screen.top-n))/a.screen.width),e}}();function T(e){!1!==a.enabled&&(window.removeEventListener("keydown",T),u=r,r===s.NONE&&(e.keyCode!==a.keys[s.ROTATE]||a.noRotate?e.keyCode!==a.keys[s.ZOOM]||a.noZoom?e.keyCode!==a.keys[s.PAN]||a.noPan||(r=s.PAN):r=s.ZOOM:r=s.ROTATE))}function L(){!1!==a.enabled&&(r=u,window.addEventListener("keydown",T,!1))}function D(e){!1!==a.enabled&&(e.preventDefault(),e.stopPropagation(),r!==s.ROTATE||a.noRotate?r!==s.ZOOM||a.noZoom?r!==s.PAN||a.noPan||k.copy(C(e.pageX,e.pageY)):b.copy(C(e.pageX,e.pageY)):(m.copy(g),g.copy(S(e.pageX,e.pageY))))}function A(e){!1!==a.enabled&&(e.preventDefault(),e.stopPropagation(),r=s.NONE,document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",A),a.dispatchEvent(M))}function P(e){!1!==a.enabled&&(e.preventDefault(),e.stopPropagation(),r===s.NONE&&(r=e.button),r!==s.ROTATE||a.noRotate?r!==s.ZOOM||a.noZoom?r!==s.PAN||a.noPan||(O.copy(C(e.pageX,e.pageY)),k.copy(O)):(y.copy(C(e.pageX,e.pageY)),b.copy(y)):(g.copy(S(e.pageX,e.pageY)),m.copy(g)),document.addEventListener("mousemove",D,!1),document.addEventListener("mouseup",A,!1),a.dispatchEvent(x))}function I(e){if(!1!==a.enabled){e.preventDefault(),e.stopPropagation();var t=0;e.wheelDelta?t=e.wheelDelta/40:e.detail&&(t=-e.detail/3),y.y+=.01*t,a.dispatchEvent(x),a.dispatchEvent(M)}}function R(e){if(!1!==a.enabled){switch(e.touches.length){case 1:r=s.TOUCH_ROTATE,g.copy(S(e.touches[0].pageX,e.touches[0].pageY)),m.copy(g);break;case 2:r=s.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;N=E=Math.sqrt(t*t+n*n);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;O.copy(C(o,i)),k.copy(O);break;default:r=s.NONE}a.dispatchEvent(x)}}function z(e){if(!1!==a.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:m.copy(g),g.copy(S(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;N=Math.sqrt(t*t+n*n);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;k.copy(C(o,i));break;default:r=s.NONE}}function X(e){if(!1!==a.enabled){switch(e.touches.length){default:break;case 1:g.copy(S(e.touches[0].pageX,e.touches[0].pageY)),m.copy(g);break;case 2:E=N=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,n=(e.touches[0].pageY+e.touches[1].pageY)/2;k.copy(C(t,n)),O.copy(k)}r=s.NONE,a.dispatchEvent(M)}}function Y(e){e.preventDefault()}return o.rotateCamera=function(){var e,t=new w.t,n=new w.m,o=new w.t,s=new w.t,i=new w.t,c=new w.t;return function(){c.set(g.x-m.x,g.y-m.y,0),(e=c.length())?(p.copy(a.object.position).sub(a.target),o.copy(p).normalize(),s.copy(a.object.up).normalize(),i.crossVectors(s,o).normalize(),s.setLength(g.y-m.y),i.setLength(g.x-m.x),c.copy(s.add(i)),t.crossVectors(c,p).normalize(),e*=a.rotateSpeed,n.setFromAxisAngle(t,e),p.applyQuaternion(n),a.object.up.applyQuaternion(n),v.copy(t),f=e):!a.staticMoving&&f&&(f*=Math.sqrt(1-a.dynamicDampingFactor),p.copy(a.object.position).sub(a.target),n.setFromAxisAngle(v,f),p.applyQuaternion(n),a.object.up.applyQuaternion(n)),m.copy(g)}}(),o.zoomCamera=function(){var e;r===s.TOUCH_ZOOM_PAN?(e=E/N,E=N,p.multiplyScalar(e)):1!==(e=1+(b.y-y.y)*a.zoomSpeed)&&e>0&&(p.multiplyScalar(e),a.staticMoving?y.copy(b):y.y+=(b.y-y.y)*o.dynamicDampingFactor)},o.panCamera=function(){var e=new w.s,t=new w.t,n=new w.t;return function(){e.copy(k).sub(O),e.lengthSq()&&(e.multiplyScalar(p.length()*a.panSpeed),n.copy(p).cross(a.object.up).setLength(e.x),n.add(t.copy(a.object.up).setLength(e.y)),a.object.position.add(n),a.target.add(n),a.staticMoving?O.copy(k):O.add(e.subVectors(k,O).multiplyScalar(a.dynamicDampingFactor)))}}(),o.checkDistances=function(){a.noZoom&&a.noPan||(p.lengthSq()>a.maxDistance*a.maxDistance&&(a.object.position.addVectors(a.target,p.setLength(a.maxDistance)),y.copy(b)),p.lengthSq()<a.minDistance*a.minDistance&&(a.object.position.addVectors(a.target,p.setLength(a.minDistance)),y.copy(b)))},o.update=function(){p.subVectors(a.object.position,a.target),a.noRotate||a.rotateCamera(),a.noZoom||a.zoomCamera(),a.noPan||a.panCamera(),a.object.position.addVectors(a.target,p),a.checkDistances(),a.object.lookAt(a.target),i.distanceToSquared(a.object.position)>1e-6&&(a.dispatchEvent(j),i.copy(a.object.position))},o.reset=function(){r=s.NONE,u=s.NONE,a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.up.copy(a.up0),p.subVectors(a.object.position,a.target),a.object.lookAt(a.target),a.dispatchEvent(j),i.copy(a.object.position)},o.dispose=function(){o.domElement.removeEventListener("contextmenu",Y,!1),o.domElement.removeEventListener("mousedown",P,!1),o.domElement.removeEventListener("mousewheel",I,!1),o.domElement.removeEventListener("DOMMouseScroll",I,!1),o.domElement.removeEventListener("touchstart",R,!1),o.domElement.removeEventListener("touchend",X,!1),o.domElement.removeEventListener("touchmove",z,!1),document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",T,!1),window.removeEventListener("keyup",L,!1)},o.domElement.addEventListener("contextmenu",Y,!1),o.domElement.addEventListener("mousedown",P,!1),o.domElement.addEventListener("mousewheel",I,!1),o.domElement.addEventListener("DOMMouseScroll",I,!1),o.domElement.addEventListener("touchstart",R,!1),o.domElement.addEventListener("touchend",X,!1),o.domElement.addEventListener("touchmove",z,!1),window.addEventListener("keydown",T,!1),window.addEventListener("keyup",L,!1),o.handleResize(),o.update(),o}return Object(u.a)(t,e),t}(w.b),N=n(33),O=function(e){function t(e,n){var o;return Object(c.a)(this,t),console.log("World3DView2!"),(o=Object(l.a)(this,Object(h.a)(t).call(this,e,n))).cpw=10,o.lpw=50,o.coreCount=5,o.ndCount=6,o.yaw=0,o.rotation=0,o.text2d=[],o.nodeNameText=[],o.cameraPosition=new w.t(0,0,100),o.element=null,o.mcount=0,o.visible=!1,o.log=o.props.log,o.store=o.props.store,o.state={cameraRotation:new w.a(-1.2,0,0),width:window.innerWidth,height:window.innerHeight-50},o.vertexShaderStr="",o.fragmentShaderStr="",o.props.store.setNodeUpdateFunc(o.updateNodeName.bind(Object(d.a)(Object(d.a)(o)))),o}return Object(u.a)(t,e),Object(r.a)(t,[{key:"updateNodeName",value:function(e,t){console.log("Update ID of node ID",e),this.nodeNameText[e].text=t}},{key:"getCoreVector",value:function(e,t){return new w.t(this.cpw*Math.cos(2*Math.PI/this.coreCount*e),t,this.cpw*Math.sin(2*Math.PI/this.coreCount*e))}},{key:"rotateObjects",value:function(e){}},{key:"onAnimate",value:function(){var e=[0,0,0,0,0,0,0,1,2,3,4,0];if(this.visible){this.controls?this.controls.update():console.log("no control");var t=this.lpw,n=this.store.getMsgCount();if(this.mcount>200);else if(n>this.mcount){for(var o=this.mcount;o<n;o++){var a=this.store.getMsg(o),s=this.store.getNodeIndex(a.getSrcNodeID()),i=new w.c,c=10-2.3*o,r=this.getCoreVector(e[a.getChType()],c-1.15),l=new w.t(t*Math.cos(2*Math.PI/this.ndCount*s),c,t*Math.sin(2*Math.PI/this.ndCount*s));i.vertices.push(l,r);var h=a.getMsgType()+":"+a.getArgs();this.add2dRenderText(h,l,!0);var u=new w.e(i,this.mesMaterial);this.mgroup.add(u)}this.mcount=n}this.props.turn&&(this.scene.rotation.y+=.003,this.rotation+=.003),this.renderer.render(this.topScene,this.camera),this.render2d(),requestAnimationFrame(this.onAnimate.bind(this))}}},{key:"convertWorldToScreenXY",value:function(e){var t=new w.t(e.x,e.y,e.z),n=new w.t(0,1,0);(t=t.applyAxisAngle(n,this.rotation)).project(this.camera);var o=this.state.width/2,a=this.state.height/2;return{x:(t.x+1)*o,y:-(t.y-1)*a}}},{key:"add2dRenderText",value:function(e,t,n){var o={text:e,vec:t,withline:n};this.text2d.push(o)}},{key:"render2d",value:function(){var e=this.canvas2dctx;e.clearRect(0,0,this.state.width,this.state.height),e.strokeStyle="white",e.lineWidth=2,e.font="16px sans-serif",e.fillStyle="white";for(var t=0;t<this.text2d.length;t++){var n=this.text2d[t],o=n.text,a=n.vec,s=n.withline,i=this.convertWorldToScreenXY(a);s?(e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(i.x+30,i.y-30),e.lineTo(i.x+30+e.measureText(o).width,i.y-30),e.stroke(),e.fillText(o,i.x+30,i.y-30-3)):e.fillText(o,i.x-e.measureText(o).width/2,i.y-3)}}},{key:"componentWillUnmount",value:function(){this.visible=!1}},{key:"componentDidMount",value:function(){console.log("WorldView did mount"),this.visible=!0;var e=this.state,t=e.width,n=e.height;this.topScene=new w.n,this.scene=new w.d,this.topScene.add(this.scene),this.camera=new w.k(55,t/n,1e-5,1e4),this.camera.position.set(0,0,110);var o=window.document.querySelector("#threejs");this.canvas2d=window.document.querySelector("#canvas2d"),this.canvas2dctx=this.canvas2d.getContext("2d"),this.renderer=new w.u({antialias:!0,canvas:o});var a=new w.h({color:26282}),s=new w.h({color:13192}),i=new w.h({color:13056}),c=new w.h({color:3368499});this.mesMaterial=new w.h({color:6684723}),a.transparent=!0;for(var r=new w.c,l=new w.c,h=this.lpw,u=this.cpw,d=["other","Clock","Area","Agent","Participant"],p=0;p<this.coreCount;p++){var m=new w.c;m.vertices.push(new w.t(u*Math.cos(2*Math.PI/this.coreCount*p),20,u*Math.sin(2*Math.PI/this.coreCount*p)),new w.t(u*Math.cos(2*Math.PI/this.coreCount*p),-1e3,u*Math.sin(2*Math.PI/this.coreCount*p))),this.coreLine=new w.e(m,i),this.scene.add(this.coreLine);var g=new w.g(new w.o(1.2),new w.h({color:8925952}));g.position.x=u*Math.cos(2*Math.PI/this.coreCount*p),g.position.y=20,g.position.z=u*Math.sin(2*Math.PI/this.coreCount*p),this.scene.add(g),this.add2dRenderText(d[p],new w.t(u*Math.cos(2*Math.PI/this.coreCount*p),23,u*Math.sin(2*Math.PI/this.coreCount*p)),!1)}for(var v=0;v<180;v++)r.vertices.push(new w.t(h*Math.cos(Math.PI*v/90),20,h*Math.sin(Math.PI*v/90))),l.vertices.push(new w.t(u*Math.cos(Math.PI*v/90),20,u*Math.sin(Math.PI*v/90)));this.iloop=new w.f(l,a),this.loop=new w.f(r,a);var f=new w.c;f.vertices.push(new w.t(0,50,0),new w.t(0,-1e3,0)),this.cLine=new w.e(f,c),this.scene.add(this.cLine);var y=this.store.getNodeNum();this.scene.add(this.iloop),this.scene.add(this.loop),this.nodes=[],this.nodeLines=[],this.nodeTexts=[],console.log("Now count",y);for(var b=0;b<y;b++){var N=new w.g(new w.o(2.2),new w.i);N.position.x=h*Math.cos(2*Math.PI/y*b),N.position.y=20,N.position.z=h*Math.sin(2*Math.PI/y*b),this.scene.add(N),this.nodes.push(N);var O=new w.c;O.vertices.push(new w.t(N.position.x,20,N.position.z),new w.t(N.position.x,-1e3,N.position.z));var k=new w.e(O,s);this.scene.add(k),this.nodeLines.push(k),this.nodeNameText[b]={text:"Node:"+b,vec:new w.t(N.position.x,23,N.position.z),withline:!1},this.text2d.push(this.nodeNameText[b])}this.mgroup=new w.d,this.scene.add(this.mgroup),this.element=window.document.getElementById("viewer");var j=new E(this.camera,this.canvas2d);j.rotateSpeed=2,j.zoomSpeed=3.8,j.panSpeed=1.5,j.noZoom=!1,j.noPan=!1,this.onResizeInner(),j.dynamicDampingFactor=.3,this.controls=j,this.base2dTextSize=this.text2d.length,this.done()}},{key:"done",value:function(){this.onAnimate()}},{key:"onResizeInner",value:function(){var e=document.getElementById("threediv");if(e){var t=e.clientWidth,n=window.innerHeight-50;this.setState({width:t,height:n}),this.camera?(this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,n)):console.log("Not yet camera")}}},{key:"render",value:function(){this.state.data;var e,t,n=document.getElementById("threediv");return n?(e=n.clientWidth,t=n.clientHeight,e===this.state.width&&t===this.state.height||(console.log("Diff with state"),this.camera&&(this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)))):(e=this.state.width,t=this.state.height),0===this.store.getMsgCount()&&void 0!==this.mgroup&&(this.mgroup.children=[],this.mcount=0,this.text2d.splice(this.base2dTextSize)),a.a.createElement("div",{id:"threediv",style:{position:"relative"}},a.a.createElement(N.ResizeListener,{onResize:this.onResizeInner.bind(this)}),a.a.createElement("canvas",{id:"threejs",style:{display:"block"},width:e,height:t}),a.a.createElement("canvas",{id:"canvas2d",style:{position:"absolute",left:0,top:0,backgroundColor:"transparent"},width:e,height:t}))}}]),t}(a.a.Component),k=function(){function e(t){Object(c.a)(this,e),this.js=t,this.obj=JSON.parse(t)}return Object(r.a)(e,[{key:"extractBitsFrom",value:function(e,t,n){return(e%Math.pow(2,n)-e%Math.pow(2,t))/Math.pow(2,t)}},{key:"snowflakeToNodeID",value:function(e){return this.extractBitsFrom(e,12,22)}},{key:"getSrcNodeID",value:function(){return this.snowflakeToNodeID(this.obj.src)}},{key:"getDstNodeID",value:function(){return this.snowflakeToNodeID(this.obj.dst)}},{key:"getMsgType",value:function(){return this.obj.msgType}},{key:"getChType",value:function(){return this.obj.chType}},{key:"getArgs",value:function(){return this.obj.arg}}]),e}(),j=function(){function e(t,n){Object(c.a)(this,e),this.id=t,this.name=n}return Object(r.a)(e,[{key:"parseMsg",value:function(e){}}]),e}(),x=function(){function e(t){Object(c.a)(this,e),console.log("New Message Store"),this.queryFunc=t,this.clear()}return Object(r.a)(e,[{key:"clear",value:function(){this.store=[],this.nodes={},this.nodeList=[]}},{key:"setNodeUpdateFunc",value:function(e){this.nodeUpdateFunc=e}},{key:"getNodeNum",value:function(){var e=Object.keys(this.nodes).length;return e<6?6:e}},{key:"setNodeName",value:function(e,t){this.nodes[e].name=t,console.log("Got Name for Visual:",e,t),this.nodeUpdateFunc(this.getNodeIndex(e),t)}},{key:"addNode",value:function(e){if(void 0===this.nodes[e]){var t=new j(e);this.queryFunc(e,this);var n=this.nodeList.length;this.nodeList.push(t),this.nodes[e]={node:t,idx:n}}}},{key:"addMsg",value:function(e){var t=new k(e);this.addNode(t.getSrcNodeID()),this.store.length>1e4&&this.store.shift(),this.store.push(t)}},{key:"getMsgCount",value:function(){return this.store.length}},{key:"getMsg",value:function(e){return this.store[e]}},{key:"getNodeIndex",value:function(e){return this.nodes[e].idx}}]),e}(),M=n(34),C=n.n(M),S=function(e){function t(e){var n;Object(c.a)(this,t),n=Object(l.a)(this,Object(h.a)(t).call(this,e));var o=C()();return n.mstore=new x(n.queryNodeName.bind(Object(d.a)(Object(d.a)(n)))),n.state={logs:[],store:n.mstore,socket:o,turn:!0},n.socket=o,o.on("connect",function(){console.log("Socket.IO Connected!")}),o.on("event",n.getEvent.bind(Object(d.a)(Object(d.a)(n)))),o.on("disconnect",function(){console.log("Socket.IO Disconnected!")}),n.selComp=O,n.selArg={logs:n.state.logs,store:n.state.store,turn:n.state.turn},n}return Object(u.a)(t,e),Object(r.a)(t,[{key:"addLog",value:function(e,t){var n=this.state.logs,o=JSON.parse(e),a=new Date;999===n.length&&console.log("Log length is now maximum 1000"),n.length>999&&n.shift(),n.push({msgType:o.msgType,chType:o.chType,id:o.id,src:o.src,dst:o.dst,arg:o.arg,tgt:o.tgt,value:t,time:a.toLocaleString()}),this.setState({logs:n})}},{key:"getEvent",value:function(e){console.log("GetEvent:",e),this.addLog(e,""),this.mstore.addMsg(e),this.setState({store:this.mstore})}},{key:"clearLogs",value:function(){console.log("App:Clearlog"),this.selArg={logs:[]},this.mstore.clear(),this.setState({logs:this.selArg.logs,store:this.mstore,turn:this.state.turn})}},{key:"viewChange",value:function(){this.selComp!==O?(this.selComp=O,this.selArg={logs:this.state.logs,store:this.state.store,turn:this.state.turn},this.setState({logs:this.state.logs,turn:this.state.turn,store:this.state.store})):(this.selComp=y,this.selArg={logs:this.state.logs,turn:!0},this.setState({logs:this.state.logs}))}},{key:"addMsg",value:function(){var e='{"src":'+Math.floor(8*Math.random())+"}";this.getEvent(e),this.addLog(e)}},{key:"convId",value:function(e){}},{key:"queryNodeName",value:function(e,t){console.log("QueryNodeName:",e,this.socket),this.socket.emit("node","0"+e,function(n){console.log("Got! nodeInfo",n),t.setNodeName(e,n)})}},{key:"addDemo",value:function(){this.addLog("Hello","abc")}},{key:"toggleTurn",value:function(){this.setState({turn:!this.state.turn}),this.selArg.turn=this.state.turn}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=a.a.createElement(p,null),n=a.a.createElement(b,{component:this.selComp,args:this.selArg}),o=a.a.createElement(m,{clearLogs:function(){return e.clearLogs()},addLog:function(){return e.addMsg()},viewChange:function(){return e.viewChange()},toggleTurn:function(){return e.toggleTurn()}});return a.a.createElement("div",null,t,o,n)}}]),t}(o.Component),T=a.a.createElement(S,null);i.a.render(T,document.getElementById("root"))}},[[35,2,1]]]);
//# sourceMappingURL=main.3735c2e3.chunk.js.map